#include "display_functions.h"
#include "font8x8_basic.h"

static uint8_t logo_image[1024] = {
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfe, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfc, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfc, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfc, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfc, 0x00, 0x00, 0x00, 0x07, 0x8f, 0x1f, 0x1e, 0x1e, 0x07, 0x00, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfc, 0x00, 0x00, 0x00, 0x0e, 0x03, 0x0f, 0x1e, 0x1e, 0x03, 0x00, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfe, 0x00, 0x00, 0x00, 0x0e, 0x23, 0x0e, 0x1e, 0x1e, 0x01, 0x81, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfe, 0x00, 0x00, 0x00, 0x0e, 0x73, 0x0e, 0x1e, 0x1e, 0x39, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfe, 0x00, 0x00, 0x00, 0x0e, 0x7f, 0x0e, 0x1c, 0x0e, 0x39, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfe, 0x00, 0x00, 0x00, 0x0e, 0x3f, 0x04, 0x1c, 0xce, 0x39, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfe, 0x00, 0x00, 0x00, 0x0f, 0x0f, 0x24, 0x9c, 0xce, 0x31, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfe, 0x00, 0x00, 0x00, 0x0f, 0x83, 0x20, 0x1c, 0xce, 0x03, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfe, 0x00, 0x00, 0x00, 0x0f, 0xe3, 0x31, 0x1c, 0xce, 0x07, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfe, 0x00, 0x00, 0x00, 0x1f, 0xf1, 0x31, 0x18, 0x06, 0x23, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xfe, 0x00, 0x00, 0x00, 0x1c, 0x71, 0x11, 0x18, 0x06, 0x23, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x00, 0x00, 0x00, 0x1c, 0x23, 0x1b, 0x98, 0xe6, 0x33, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x00, 0x00, 0x00, 0x1e, 0x03, 0x1f, 0x99, 0xe6, 0x31, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x00, 0x00, 0x00, 0x1f, 0x07, 0x1f, 0x91, 0xe2, 0x39, 0xe7, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x00, 0x00, 0x00, 0x1e, 0x73, 0xce, 0x38, 0x06, 0x06, 0x0f, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x00, 0x00, 0x00, 0x1c, 0x73, 0x8e, 0x18, 0x04, 0x06, 0x03, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x00, 0x00, 0x00, 0x3c, 0x71, 0x8e, 0x18, 0x04, 0x06, 0x03, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x80, 0x00, 0x00, 0x3e, 0x71, 0x8c, 0x1f, 0x3c, 0x7e, 0x71, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x80, 0x00, 0x00, 0x3e, 0x61, 0x9c, 0x9f, 0x3c, 0x7e, 0x71, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x80, 0x00, 0x00, 0x3e, 0x21, 0x9c, 0x9f, 0x3c, 0x7e, 0x71, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x80, 0x00, 0x00, 0x3e, 0x21, 0x9c, 0x8f, 0x3c, 0x06, 0x71, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x80, 0x00, 0x00, 0x3f, 0x24, 0x18, 0xcf, 0x3c, 0x06, 0x03, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x80, 0x00, 0x00, 0x3f, 0x04, 0x18, 0xcf, 0x3c, 0x7e, 0x07, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x80, 0x00, 0x00, 0x3f, 0x0c, 0x38, 0x0f, 0x3c, 0x7e, 0x07, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0x80, 0x00, 0x00, 0x3f, 0x0c, 0x38, 0x07, 0x3c, 0x7e, 0x63, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xc0, 0x00, 0x00, 0x7f, 0x0e, 0x39, 0xc7, 0x3c, 0x7e, 0x63, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xc0, 0x00, 0x00, 0x7f, 0x8e, 0x31, 0xe7, 0x3c, 0x06, 0x73, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xc0, 0x00, 0x00, 0x7f, 0x8e, 0x31, 0xe7, 0x3e, 0x06, 0x71, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xc0, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xf0, 0x00, 0x01, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00,
	0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00
};


void init_display(SSD1306_t* dev) {
    ssd1306_init(dev, 128, 64);

    ssd1306_clear_screen(dev, false);
    ssd1306_contrast(dev, 0xff);
}

void welcome_screen(SSD1306_t* dev) {
    ssd1306_clear_screen(dev, false);

    // ssd1306_display_text(dev, 0, "SMART", 5, false);
    // ssd1306_display_text(dev, 2, "WATER", 5, false);
    // ssd1306_display_text(dev, 4, "DISTRIBUTOR", 11, false);
	ssd1306_bitmaps(dev, 0, 0, logo_image, 128, 64, false);
}

void pouring_finished_screen(SSD1306_t* dev) {
    ssd1306_display_text(dev, 1, "Pouring finished!", 17, false);
    ssd1306_display_text(dev, 3, "Take your water", 15, false);
    ssd1306_display_text(dev, 5, "Please", 6, false);
}

void factory_reset_screen(SSD1306_t* dev, uint8_t time_to_restart) {
    char text[25];
    sprintf(text, "Restarting in %d s", time_to_restart);
    ssd1306_display_text(dev, 3, text, 25, false);
}

